<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Productos - Micasita</title>
  <link rel="stylesheet" href="estilos.css">
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@700&display=swap" rel="stylesheet">
  <style>
    .producto-card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .producto-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }

    .producto-imagen {
      width: 100%;
      height: 200px;
      object-fit: cover;
      display: block;
    }

    .producto-contenido {
      padding: 16px;
    }

    .producto-titulo {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--color-text);
      margin: 0 0 8px 0;
    }

    .producto-precio {
      font-size: 1.4rem;
      color: var(--color-secundario);
      font-weight: 700;
      margin: 0 0 8px 0;
    }

    .producto-descripcion {
      font-size: 0.9rem;
      color: #666;
      line-height: 1.5;
      margin: 0 0 12px 0;
    }

    .productos-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }

    .sin-productos {
      text-align: center;
      padding: 60px 20px;
      color: #999;
    }

    .btn-volver {
      display: inline-block;
      margin-bottom: 20px;
      padding: 10px 16px;
      background: var(--color-secundario);
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 600;
      transition: background 0.3s ease;
    }

    .btn-volver:hover {
      background: var(--color-hover);
    }

    @media (max-width: 768px) {
      .productos-grid {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 15px;
      }

      .producto-imagen {
        height: 150px;
      }

      .producto-titulo {
        font-size: 0.95rem;
      }
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="wrap header-inner">
      <button class="logo-btn" aria-label="Ir al inicio" onclick="irInicio()">
        <img src="imagenes/logo.jpg" alt="Logo Micasita" class="logo">
      </button>
      <nav class="main-nav" aria-label="Navegación principal">
        <button class="nav-btn" onclick="mostrarVentana('sobre nosotros')">Sobre nosotros</button>
        <button class="nav-btn" onclick="mostrarVentana('redes sociales')">Redes sociales</button>
        <a href="admin.html" class="nav-btn" style="text-decoration: none; display: flex; align-items: center; justify-content: center;">⚙️ Admin</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <a href="index.html" class="btn-volver">← Volver al inicio</a>
    <h1 id="titulo-categoria"></h1>

    <div id="productos-container" class="productos-grid"></div>
  </main>

  <!-- Modales -->
  <div id="modal-sobre nosotros" class="modal" role="dialog" aria-hidden="true" aria-labelledby="titulo-sobre">
    <div class="modal-content">
      <h2 id="titulo-sobre">Sobre nosotros</h2>
      <p>"Micasita es un emprendimiento multirubro creado con amor y dedicación. Valoramos cada visita, mensaje y compra porque nos motivan a crecer. Detrás de este proyecto hay sueños y esfuerzo, y queremos que sientas que Micasita también es tu casita."</p>
      <button class="btn-close" onclick="cerrarVentana('sobre nosotros')">Cerrar</button>
    </div>
  </div>

  <div id="modal-redes sociales" class="modal" role="dialog" aria-hidden="true" aria-labelledby="titulo-redes">
    <div class="modal-content">
      <h2 id="titulo-redes">Redes sociales</h2>
      <p>Instagram: mi.casita01</p>
      <p>WhatsApp: 3533439355</p>
      <button class="btn-close" onclick="cerrarVentana('redes sociales')">Cerrar</button>
    </div>
  </div>

  <footer class="site-footer">
    <div class="wrap footer-inner">
      <div class="footer-content">
        <p>Contacto rápido:</p>
        <a href="https://wa.me/543533518390?text=Hola%20como%20estas%3F%20tengo%20una%20consulta" target="_blank" class="whatsapp" rel="noopener noreferrer">
          <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp" />
        </a>
      </div>
    </div>
  </footer>

  <script src="admin.js"></script>
  <script>
    function irInicio() { window.location.href = 'index.html'; }

    function mostrarVentana(tipo) {
      const id = 'modal-' + tipo;
      const modal = document.getElementById(id);
      if (!modal) return;
      modal.setAttribute('aria-hidden', 'false');
      modal.classList.add('modal-open');
      document.body.style.overflow = 'hidden';
    }

    function cerrarVentana(tipo) {
      const id = 'modal-' + tipo;
      const modal = document.getElementById(id);
      if (!modal) return;
      modal.setAttribute('aria-hidden', 'true');
      modal.classList.remove('modal-open');
      document.body.style.overflow = '';
    }

    function cargarProductos() {
      const params = new URLSearchParams(window.location.search);
      const categoria = params.get('categoria');

      if (!categoria) {
        window.location.href = 'index.html';
        return;
      }

      document.getElementById('titulo-categoria').textContent = categoria;
      document.title = `${categoria} - Micasita`;

      const productos = DataManager.obtenerProductosPorCategoria(categoria);
      const contenedor = document.getElementById('productos-container');

      if (productos.length === 0) {
        contenedor.innerHTML = '<div class="sin-productos" style="grid-column: 1/-1;">No hay productos en esta categoría aún</div>';
        return;
      }

      contenedor.innerHTML = productos.map(prod => `
        <div class="producto-card">
          <img src="${prod.imagen}" alt="${prod.nombre}" class="producto-imagen">
          <div class="producto-contenido">
            <h3 class="producto-titulo">${prod.nombre}</h3>
            <p class="producto-precio">$${parseFloat(prod.precio).toFixed(2)}</p>
            <p class="producto-descripcion">${prod.descripcion || 'Sin descripción'}</p>
            <a href="https://wa.me/543533518390?text=Hola%20tengo%20una%20consulta%20sobre:%20${encodeURIComponent(prod.nombre)}" target="_blank" class="nav-btn" style="width: 100%; text-align: center; text-decoration: none;">Consultar</a>
          </div>
        </div>
      `).join('');
    }

    document.addEventListener('DOMContentLoaded', cargarProductos);
  </script>
</body>
</html>
